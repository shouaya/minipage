<pagination>
<div class="page">
    <div class="page__bd" style="height: 100%;">
        <div class="weui-tab">
            <div class="weui-navbar">
                <div if={ this.parent.page > 1 } class="weui-navbar__item" onclick={last}>
                    <<<<<
                </div>
                <div class="weui-navbar__item" onclick={this.parent.refresh}>
                    ページ {this.parent.page}
                </div>
                <div if={ this.parent.page*opts.size < opts.total } class="weui-navbar__item" onclick={next}>
                    >>>>>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
last(e){
	this.parent.page = this.parent.page - 1;
	this.parent.refresh();
}
next(e){
	this.parent.page = this.parent.page + 1;
	this.parent.refresh();
}
</script>
</pagination>

<back>
<div class="page">
    <div class="page__bd" style="height: 100%;">
        <div class="weui-tab">
            <div class="weui-navbar">
                <div class="weui-navbar__item" onclick={opts.goback}>
                    {opts.title}
                </div>
            </div>
        </div>
    </div>
</div>
</back>

<reply-text>
<div class="page__bd">
	<div class="weui-form-preview">
		<div class="weui-form-preview__bd">
			<div class="weui-form-preview__item">
			</div>
			<div class="weui-form-preview__item">
				<div class="weui-cells weui-cells_form">
					<div class="weui-cell">
						<div class="weui-cell__bd" >
							<textarea id="reply-text-content" onkeyup={resize} class="weui-textarea" placeholder="メッセージのテキスト2000文字以内" rows="8">{this.data.text}</textarea>
							<div class="weui-textarea-counter"><span>{size}</span>/2000</div>
						</div>
					</div>
				</div>
			</div>
			<reply-base data={this.item}>
			</reply-base>
		</div>
		<div class="weui-form-preview__ft" onclick={edit}>
			<a class="weui-form-preview__btn weui-form-preview__btn_primary" href="javascript:">保存</a>
		</div>
	</div>
</div>
<script>
var self = this;
this.item = {};
this.dataArr = [];
this.data = {};
this.size = 0;
this.on('mount', function(){
	this.item.id = opts.data.id;
	this.item.message = opts.data.message;
	this.item.type = opts.data.type;
	this.item.business = opts.data.business;
	this.item.level = opts.data.level;
	this.item.rule = opts.data.rule;
	this.item.deleted = opts.data.deleted;
	this.dataArr = JSON.parse(this.item.message);
	this.data = this.dataArr[0];
	this.size = this.data.text.length;
    this.update();
});
resize(e){
	this.size = $('#reply-text-content').val().length;
	this.data.text = $('#reply-text-content').val();
	this.update();
}
edit(e){
	this.item.message = JSON.stringify(this.dataArr);
	this.item.business = $('#reply-base-business').val()
	this.item.level = $('#reply-base-level').val()
	this.item.rule = $('#reply-base-rule').val()
	this.opts.save(this.item);
}
</script>
</reply-text>
<reply-image>
<div class="page__bd">
	<article class="weui-article">
		<img src="{this.data.previewImageUrl}">
		<div class="weui-uploader">
			<div class="weui-uploader__bd">
				<div class="weui-uploader__input-box">
					<input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" multiple />
				</div>
			</div>
		</div>
	</article>
	<div class="weui-form-preview">
		<div class="weui-form-preview__bd">
			<div class="weui-form-preview__item">
			</div>
			<reply-base data={this.item}>
			</reply-base>
		</div>
		<div class="weui-form-preview__ft" onclick={edit}>
			<a class="weui-form-preview__btn weui-form-preview__btn_primary" href="javascript:">保存</a>
		</div>
	</div>
</div>
<script>
var self = this;
this.item = {};
this.dataArr = [];
this.data = {};
this.showB = false;
this.on('mount', function(){
	this.item.id = opts.data.id;
	this.item.message = opts.data.message;
	this.item.type = opts.data.type;
	this.item.business = opts.data.business;
	this.item.level = opts.data.level;
	this.item.rule = opts.data.rule;
	this.item.deleted = opts.data.deleted;
	this.dataArr = JSON.parse(this.item.message);
	this.data = this.dataArr[0];
    this.update();
});
edit(e){
	this.item.message = JSON.stringify(this.dataArr);
	this.item.business = $('#reply-base-business').val()
	this.item.level = $('#reply-base-level').val()
	this.item.rule = $('#reply-base-rule').val()
	this.opts.save(this.item);
}
showBig(e){
	this.showB = true;
	console.log(this);
	this.update();
}
</script>
</reply-image>
<reply-video>
<a>{opts.message}</a>
<script>
toJson()
{
	return function(e) {
		return JSON.stringify(this);
	}
}
</script>
</reply-video>
<reply-audio>
<a>{opts.message}</a>
<script>
toJson()
{

}
</script>
</reply-audio>
<reply-location>
<a>{opts.message}</a>
<script>
toJson()
{
	return function(e) {
		return JSON.stringify(this);
	}
}
</script>
</reply-location>
<reply-sticker>
<a>{opts.message}</a>
<script>
toJson()
{
	return function(e) {
		return JSON.stringify(this);
	}
}
</script>
</reply-sticker>
<reply-imagemap>
<a>{opts.message}</a>
<script>
toJson()
{
	return function(e) {
		return JSON.stringify(this);
	}
}
</script>
</reply-imagemap>
<reply-template>
<a>{opts.message}</a>
<script>
toJson()
{
	return function(e) {
		return JSON.stringify(this);
	}
}
</script>
</reply-template>
<reply-base>
<div class="weui-flex">
	<div class="weui-flex__item">
		<input id="reply-base-rule" class="weui-input" type="text" value="{opts.data.rule}"/>
	</div>
	<div class="ui left pointing label">
	  条件
	</div>
</div>
<hr/>
<div class="weui-flex">
	<div class="weui-flex__item">
		<input id="reply-base-business" class="weui-input" type="text" value="{opts.data.business}"/>
	</div>
	<div class="ui left pointing label">
	  後処理
	</div>
</div>
<hr/>
<div class="weui-flex">
	<div class="weui-flex__item">
		<input id="reply-base-level" class="weui-input" type="text" value="{opts.data.level}"/>
	</div>
	<div class="ui left pointing label">
	  レベル
	</div>
</div>
</reply-base>